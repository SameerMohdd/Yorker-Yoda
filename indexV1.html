<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yorker Yoda - PSL 2025 Match Predictor</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: white;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 2px solid #B27F35;
        }
        header {
            text-align: center;
            background: linear-gradient(to right, #2B6735, #B27F35);
            padding: 20px;
            border-radius: 10px;
            color: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
        }
        .header-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 2;
        }
        .cricket-icons {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
            opacity: 0.1;
        }
        .cricket-icons::before {
            content: 'üèè';
            position: absolute;
            font-size: 80px;
            left: 20px;
            top: 50%;
            transform: translateY(-50%) rotate(-45deg);
        }
        .cricket-icons::after {
            content: 'üèè';
            position: absolute;
            font-size: 80px;
            right: 20px;
            top: 50%;
            transform: translateY(-50%) rotate(45deg);
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .yoda-emoji {
            font-size: 60px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .yoda-emoji::before {
            content: 'üèè';
            font-size: 40px;
        }
        .yoda-emoji::after {
            content: 'üèè';
            font-size: 40px;
        }
        h1 {
            color: #fff;
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .tagline {
            color: #fff;
            font-style: italic;
            margin: 5px 0;
            opacity: 0.9;
            font-size: 1.2em;
        }
        .match-selector {
            margin: 20px 0;
            background: rgba(43, 103, 53, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #B27F35;
        }
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #B27F35;
            border-radius: 8px;
            font-size: 16px;
            margin-top: 8px;
            background: white;
            color: #2B6735;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        select:hover {
            border-color: #2B6735;
        }
        .predict-btn {
            background: linear-gradient(to right, #B27F35, #8c6428);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            cursor: pointer;
            position: relative;
            margin: 20px auto;
            display: block;
            transform: skew(-20deg);
            border-radius: 5px 50px 50px 5px;
            box-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            width: 200px;
        }
        .predict-btn span {
            display: inline-block;
            transform: skew(20deg);
        }
        .predict-btn::after {
            content: '';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 15px;
            height: 80%;
            background: #8c6428;
            border-radius: 0 5px 5px 0;
        }
        .predict-btn:hover {
            transform: skew(-20deg) translateY(-2px);
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3);
        }
        #match-details {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(43, 103, 53, 0.1), rgba(178, 127, 53, 0.1));
            border-radius: 12px;
            border: 1px solid #B27F35;
        }
        .team-logos {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
        }
        .team-logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 3px solid #B27F35;
            transition: transform 0.3s ease;
            overflow: hidden;
            background: white;
            padding: 5px;
        }
        .team-logo img {
            width: 90%;
            height: 90%;
            object-fit: contain;
        }
        .team-logo:hover {
            transform: scale(1.05);
        }
        .loading-spinner {
            display: none;
            width: 50px;
            height: 50px;
            border: 5px solid #B27F35;
            border-top: 5px solid #2B6735;
            border-radius: 50%;
            margin: 20px auto;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .prediction-result {
            margin-top: 20px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(43, 103, 53, 0.1), rgba(178, 127, 53, 0.1));
            border-radius: 12px;
            border-left: 5px solid #2B6735;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none;
        }
        .quote {
            font-style: italic;
            text-align: center;
            color: #555;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.8);
            border-radius: 8px;
            border: 1px solid #B27F35;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 1px solid #B27F35;
            transition: transform 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-2px);
        }
        .stat-card h4 {
            margin: 0 0 10px 0;
            color: #2B6735;
            border-bottom: 2px solid #B27F35;
            padding-bottom: 5px;
        }
        #weather-selector {
            background: linear-gradient(135deg, rgba(43, 103, 53, 0.1), rgba(178, 127, 53, 0.1));
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #B27F35;
            margin-top: 20px;
            text-align: center;
        }
        #weather {
            background: white;
            border: 2px solid #B27F35;
            padding: 10px;
            width: 200px;
            border-radius: 8px;
            margin: 10px 0;
            color: #2B6735;
        }
        label {
            color: #2B6735;
            font-weight: bold;
        }
        
        /* Analysis Breakdown Styles */
        .tabs-container {
            margin-top: 20px;
        }
        
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .tab-button {
            padding: 12px 24px;
            border: none;
            background: #f0f0f0;
            color: #2B6735;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .tab-button.active {
            background: #2B6735;
            color: white;
            border-bottom: 3px solid #B27F35;
        }
        
        .tab-button:hover:not(.active) {
            background: #e0e0e0;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border: 1px solid #B27F35;
            border-radius: 0 8px 8px 8px;
            min-height: 300px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .analysis-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .analysis-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        
        .factor-label {
            font-weight: bold;
            color: #2B6735;
            width: 40%;
        }
        
        .h2h-overview {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(43, 103, 53, 0.1), rgba(178, 127, 53, 0.1));
            border-radius: 10px;
        }
        
        .h2h-stat {
            text-align: center;
        }
        
        .h2h-number {
            display: block;
            font-size: 36px;
            font-weight: bold;
            color: #2B6735;
        }
        
        .h2h-label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .team1-stat .h2h-number {
            color: #2B6735;
        }
        
        .team2-stat .h2h-number {
            color: #B27F35;
        }
        
        .recent-matches {
            margin-top: 20px;
        }
        
        .match-result {
            padding: 10px;
            margin: 10px 0;
            background: #f9f9f9;
            border-left: 4px solid #B27F35;
            border-radius: 4px;
        }
        
        .venue-stats table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .venue-stats td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        
        .form-tables {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .team-form {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
        }
        
        .team-form h4 {
            margin-top: 0;
            color: #2B6735;
            border-bottom: 2px solid #B27F35;
            padding-bottom: 10px;
        }
        
        .form-match {
            padding: 8px;
            margin: 8px 0;
            background: white;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .form-match.win {
            border-left: 4px solid #2B6735;
        }
        
        .form-match.loss {
            border-left: 4px solid #d32f2f;
        }
        
        .form-match .result {
            font-weight: bold;
        }
        
        .form-match .result.win {
            color: #2B6735;
        }
        
        .form-match .result.loss {
            color: #d32f2f;
        }
        
        @media (max-width: 768px) {
            .form-tables {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab-button {
                flex: 1;
                min-width: 120px;
            }
        }
</style>
</head>
<body>
    <div class="container">
        <header>
            <div class="cricket-icons"></div>
            <div class="header-content">
                <div class="logo">
                    <div class="yoda-emoji">üßô</div>
                </div>
                <div>
                    <h1>Yorker Yoda</h1>
                    <p class="tagline">PSL Match Predictor</p>
                </div>
            </div>
        </header>

        <div class="match-selector">
            <label for="match-select">Select Upcoming Match:</label>
            <select id="match-select">
                <option value="">-- Select a Match --</option>
            </select>
        </div>

        <div id="match-details" style="display: none;">
            <h3 id="match-title">Match Details</h3>
            <div class="team-logos">
                <div>
                    <div id="team1-logo" class="team-logo"></div>
                    <p id="team1-name" style="text-align: center; font-weight: bold;"></p>
                </div>
                <div style="font-weight: bold; font-size: 24px;">VS</div>
                <div>
                    <div id="team2-logo" class="team-logo"></div>
                    <p id="team2-name" style="text-align: center; font-weight: bold;"></p>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <p><strong>Date:</strong> <span id="match-date"></span></p>
                <p><strong>Time:</strong> <span id="match-time"></span></p>
                <p><strong>Venue:</strong> <span id="match-venue"></span></p>
                <p><strong>Head to Head:</strong> <span id="head-to-head"></span></p>
            </div>
        </div>

        <div id="analysis-breakdown" style="display: none;">
            <h3 style="margin-top: 30px; color: #2B6735; border-bottom: 2px solid #B27F35; padding-bottom: 10px;">üìä Analysis Breakdown</h3>
            
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab-button active" data-tab="key-factors">Key Factors</button>
                    <button class="tab-button" data-tab="head-to-head">Head to Head</button>
                    <button class="tab-button" data-tab="venue-analysis">Venue Analysis</button>
                    <button class="tab-button" data-tab="current-form">Current Form</button>
                </div>
                
                <div class="tab-content active" id="key-factors">
                    <div class="analysis-table">
                        <h4>Prediction Factors</h4>
                        <table>
                            <tr>
                                <td class="factor-label">Head-to-Head in PSL 2025</td>
                                <td id="h2h-current-season"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Toss Advantage at Venue</td>
                                <td id="toss-advantage"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">PSL 2025 Win Percentage</td>
                                <td id="win-percentage"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Performance at Venue</td>
                                <td id="venue-performance"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Recent Form (Last 5 matches)</td>
                                <td id="recent-form"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Key Players Availability</td>
                                <td id="key-players-status"></td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div class="tab-content" id="head-to-head">
                    <div class="h2h-stats">
                        <div class="h2h-overview">
                            <div class="h2h-stat">
                                <span class="h2h-number" id="total-matches">0</span>
                                <span class="h2h-label">Total Matches</span>
                            </div>
                            <div class="h2h-stat team1-stat">
                                <span class="h2h-number" id="team1-wins">0</span>
                                <span class="h2h-label">Team 1 Wins</span>
                            </div>
                            <div class="h2h-stat team2-stat">
                                <span class="h2h-number" id="team2-wins">0</span>
                                <span class="h2h-label">Team 2 Wins</span>
                            </div>
                        </div>
                        <div class="recent-matches">
                            <h4>PSL 2025 Head-to-Head</h4>
                            <div id="recent-h2h-matches"></div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="venue-analysis">
                    <div class="venue-stats">
                        <h4 id="venue-name">Venue Stats</h4>
                        <table>
                            <tr>
                                <td class="factor-label">Average 1st Innings Score</td>
                                <td id="avg-first-innings"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Average 2nd Innings Score</td>
                                <td id="avg-second-innings"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Toss Decision Trend</td>
                                <td id="toss-decision-trend"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Team 1 at this venue (PSL 2025)</td>
                                <td id="team1-venue-record"></td>
                            </tr>
                            <tr>
                                <td class="factor-label">Team 2 at this venue (PSL 2025)</td>
                                <td id="team2-venue-record"></td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div class="tab-content" id="current-form">
                    <div class="form-tables">
                        <div class="team-form">
                            <h4 id="team1-form-title">Team 1 - Recent Form</h4>
                            <div id="team1-recent-form"></div>
                        </div>
                        <div class="team-form">
                            <h4 id="team2-form-title">Team 2 - Recent Form</h4>
                            <div id="team2-recent-form"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="weather-selector" style="display: none;">
            <label for="weather">Select Weather Condition:</label><br>
            <select id="weather">
                <option value="Clear">Clear</option>
                <option value="Cloudy">Cloudy</option>
                <option value="Light Rain">Light Rain</option>
                <option value="Hot and Humid">Hot and Humid</option>
            </select>
            <br>
            <button id="predict-btn" class="predict-btn"><span>Predict</span></button>
        </div>

        <div id="loading" class="loading-spinner"></div>

        <div id="prediction-result" class="prediction-result">
            <div id="prediction-text"></div>
            <div id="yoda-quote" class="quote"></div>
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Win Probability</h4>
                    <div id="win-probability"></div>
                </div>
                <div class="stat-card">
                    <h4>Key Player</h4>
                    <div id="key-player"></div>
                </div>
                <div class="stat-card">
                    <h4>Expected Score</h4>
                    <div id="expected-score"></div>
                </div>
                <div class="stat-card">
                    <h4>Toss Impact</h4>
                    <div id="toss-impact"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Team data with details
        const teamData = {
            "Islamabad United": { code: "IU", color: "#A81D33" },
            "Peshawar Zalmi": { code: "PZ", color: "#FFC700" },
            "Quetta Gladiators": { code: "QG", color: "#4B0082" },
            "Lahore Qalandars": { code: "LQ", color: "#00A651" },
            "Karachi Kings": { code: "KK", color: "#1C3C7C" },
            "Multan Sultans": { code: "MS", color: "#00B5AF" }
        };

        // All PSL 2025 matches - Updated with remaining games
        const allMatches = {
            "Match23": {
                team1: "Islamabad United",
                team2: "Quetta Gladiators",
                date: "2025-05-03",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Match 23: Third encounter this season"
            },
            "Match24": {
                team1: "Lahore Qalandars",
                team2: "Karachi Kings",
                date: "2025-05-04",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Match 24: Key match for playoff race"
            },
            "Match25": {
                team1: "Multan Sultans",
                team2: "Peshawar Zalmi",
                date: "2025-05-05",
                time: "8:00 PM",
                venue: "Multan",
                headToHead: "Match 25: Third encounter (Previous: PZ won by 120 runs)"
            },
            "Match26": {
                team1: "Islamabad United",
                team2: "Quetta Gladiators",
                date: "2025-05-06",
                time: "8:00 PM",
                venue: "Rawalpindi",
                headToHead: "Match 26: Fourth meeting this season"
            },
            "Match27": {
                team1: "Peshawar Zalmi",
                team2: "Karachi Kings",
                date: "2025-05-07",
                time: "8:00 PM",
                venue: "Rawalpindi",
                headToHead: "Match 27: Third meeting (Previous: KK won by 2 wickets)"
            },
            "Match28": {
                team1: "Lahore Qalandars",
                team2: "Peshawar Zalmi",
                date: "2025-05-08",
                time: "8:00 PM",
                venue: "Rawalpindi",
                headToHead: "Match 28: Third meeting (Previous: PZ won by 7 wickets)"
            },
            "Match29": {
                team1: "Multan Sultans",
                team2: "Islamabad United",
                date: "2025-05-09",
                time: "8:00 PM",
                venue: "Multan",
                headToHead: "Match 29: Fourth meeting this season"
            },
            "Match30": {
                team1: "Karachi Kings",
                team2: "Quetta Gladiators",
                date: "2025-05-10",
                time: "8:00 PM",
                venue: "Karachi",
                headToHead: "Match 30: Fourth meeting this season"
            },
            "Match31": {
                team1: "Lahore Qalandars",
                team2: "Multan Sultans",
                date: "2025-05-11",
                time: "3:00 PM",
                venue: "Lahore",
                headToHead: "Match 31: Third meeting (Previous: MS won by 33 runs)"
            },
            "Match32": {
                team1: "Peshawar Zalmi",
                team2: "Islamabad United",
                date: "2025-05-11",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Match 32: Fourth meeting this season"
            },
            "Match33": {
                team1: "Karachi Kings",
                team2: "Lahore Qalandars",
                date: "2025-05-12",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Match 33: Third meeting (Previous: LQ won by 65 runs)"
            },
            "Match34": {
                team1: "Quetta Gladiators",
                team2: "Multan Sultans",
                date: "2025-05-12",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Match 34: Third meeting (Previous: QG won by 10 wickets)"
            },
            // Playoff matches
            "Qualifier": {
                team1: "TBD (1st)",
                team2: "TBD (2nd)",
                date: "2025-05-13",
                time: "8:00 PM",
                venue: "Rawalpindi",
                headToHead: "Qualifier: Top two teams battle for finals spot"
            },
            "Eliminator1": {
                team1: "TBD (3rd)",
                team2: "TBD (4th)",
                date: "2025-05-14",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Eliminator 1: Do or die match"
            },
            "Eliminator2": {
                team1: "TBD",
                team2: "TBD",
                date: "2025-05-16",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Eliminator 2: Winner goes to final"
            },
            "Final": {
                team1: "TBD",
                team2: "TBD",
                date: "2025-05-18",
                time: "8:00 PM",
                venue: "Lahore",
                headToHead: "Final: PSL 2025 Championship"
            }
        };

        // Get today's date at start of day
        function getTodayStart() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            return today;
        }

        // Function to get upcoming matches
        function getUpcomingMatches() {
            const today = getTodayStart();
            const upcomingMatches = {};
            
            for (const [key, match] of Object.entries(allMatches)) {
                const matchDate = new Date(match.date);
                if (matchDate >= today) {
                    upcomingMatches[key] = match;
                }
            }
            
            return upcomingMatches;
        }

        // Function to populate match selector
        function populateMatchSelector() {
            const matchSelect = document.getElementById('match-select');
            matchSelect.innerHTML = '<option value="">-- Select a Match --</option>';
            
            const upcomingMatches = getUpcomingMatches();
            for (const [key, match] of Object.entries(upcomingMatches)) {
                const matchDate = new Date(match.date);
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                const option = document.createElement('option');
                option.value = key;
                
                // Format date string
                const dateStr = matchDate.toLocaleDateString('en-US', { 
                    month: 'long', 
                    day: 'numeric'
                });
                
                // Add today/tomorrow label
                let timeLabel = '';
                if (matchDate.toDateString() === today.toDateString()) {
                    timeLabel = ' (Today)';
                } else if (matchDate.toDateString() === tomorrow.toDateString()) {
                    timeLabel = ' (Tomorrow)';
                }
                
                option.textContent = `${match.team1} vs ${match.team2} - ${dateStr}${timeLabel}`;
                matchSelect.appendChild(option);
            }
        }

        // Function to show match details
        function showMatchDetails(matchId) {
            const matchDetails = document.getElementById('match-details');
            const analysisBreakdown = document.getElementById('analysis-breakdown');
            const weatherSelector = document.getElementById('weather-selector');
            const predictionResult = document.getElementById('prediction-result');

            if (!matchId) {
                matchDetails.style.display = 'none';
                analysisBreakdown.style.display = 'none';
                weatherSelector.style.display = 'none';
                predictionResult.style.display = 'none';
                return;
            }

            const match = allMatches[matchId];
            if (!match) return;

            // Update match details
            document.getElementById('match-title').textContent = `${match.team1} vs ${match.team2}`;
            
            const team1Logo = document.getElementById('team1-logo');
            const team2Logo = document.getElementById('team2-logo');
            
            team1Logo.innerHTML = `<img src="logo/${match.team1.replace(' ', '_')}.png" alt="${match.team1}">`;
            team2Logo.innerHTML = `<img src="logo/${match.team2.replace(' ', '_')}.png" alt="${match.team2}">`;
            
            team1Logo.className = 'team-logo';
            team2Logo.className = 'team-logo';
            
            document.getElementById('team1-name').textContent = match.team1;
            document.getElementById('team2-name').textContent = match.team2;
            document.getElementById('match-date').textContent = new Date(match.date).toLocaleDateString('en-US', { 
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('match-time').textContent = match.time;
            document.getElementById('match-venue').textContent = match.venue;
            document.getElementById('head-to-head').textContent = match.headToHead;

            // Show sections
            matchDetails.style.display = 'block';
            analysisBreakdown.style.display = 'block';
            weatherSelector.style.display = 'block';
            predictionResult.style.display = 'none';
            
            // Update analysis breakdown
            updateAnalysisBreakdown(match);
        }

        function generatePrediction() {
            const matchId = document.getElementById('match-select').value;
            const weather = document.getElementById('weather').value;
            
            if (!matchId) {
                alert('Please select a match first!');
                return;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('prediction-result').style.display = 'none';

            setTimeout(() => {
                const match = allMatches[matchId];
                const team1 = match.team1;
                const team2 = match.team2;

                // Calculate base probabilities (40-60% range)
                let team1Prob = 40 + Math.random() * 20;
                let team2Prob = 100 - team1Prob;

                // Adjust for weather conditions
                const weatherImpact = {
                    'Clear': 0,
                    'Cloudy': 5,
                    'Light Rain': 8,
                    'Hot and Humid': 3
                }[weather];

                // Randomly give weather advantage to one team
                if (Math.random() > 0.5) {
                    team1Prob += weatherImpact;
                    team2Prob -= weatherImpact;
                } else {
                    team1Prob -= weatherImpact;
                    team2Prob += weatherImpact;
                }

                team1Prob = Math.round(Math.max(35, Math.min(65, team1Prob)));
                team2Prob = 100 - team1Prob;

                const winner = team1Prob > team2Prob ? team1 : team2;
                const keyPlayers = {
                    "Islamabad United": ["Shadab Khan", "Alex Hales", "Faheem Ashraf"],
                    "Lahore Qalandars": ["Shaheen Afridi", "Fakhar Zaman", "Haris Rauf"],
                    "Karachi Kings": ["Babar Azam", "Imad Wasim", "Mohammad Amir"],
                    "Quetta Gladiators": ["Mohammad Hasnain", "Jason Roy", "Mohammad Nawaz"],
                    "Peshawar Zalmi": ["Wahab Riaz", "Shoaib Malik", "Liam Livingstone"],
                    "Multan Sultans": ["Mohammad Rizwan", "Khushdil Shah", "Shahnawaz Dahani"]
                };

                const keyPlayer = keyPlayers[winner][Math.floor(Math.random() * 3)];
                const isClose = Math.abs(team1Prob - team2Prob) < 10;

                // Update prediction text
                document.getElementById('prediction-text').innerHTML = `
                    <strong>${winner} are favored to win${isClose ? ' in a close contest' : ''}</strong><br><br>
                    Our analysis shows a competitive match ahead${isClose ? ', with both teams evenly matched' : 
                    ', with one team having a clear advantage'}.
                `;

                // Update win probabilities
                document.getElementById('win-probability').innerHTML = `
                    ${team1}: ${team1Prob}%<br>
                    ${team2}: ${team2Prob}%
                `;

                // Update key player
                document.getElementById('key-player').textContent = keyPlayer;

                // Update expected score based on conditions
                const baseScore = {
                    'Clear': '170-180',
                    'Cloudy': '160-170',
                    'Light Rain': '150-160',
                    'Hot and Humid': '165-175'
                }[weather];
                document.getElementById('expected-score').textContent = baseScore;

                // Update toss impact
                document.getElementById('toss-impact').textContent = 
                    weather === 'Light Rain' ? "Bowl first advantage due to DLS factor" :
                    weather === 'Hot and Humid' ? "Bat first and set a target" :
                    "Conditions favor chasing";

                // Show Yoda quote
                const yodaQuotes = [
                    "Size matters not. The Force in cricket, strong it is.",
                    "Do or do not. There is no try in this match.",
                    "Difficult to see. Always in motion is the future of cricket.",
                    "Trust in the Force, and good cricket will follow.",
                    "Victory? Victory you say? Master cricket you must, to achieve it."
                ];
                document.getElementById('yoda-quote').textContent = 
                    yodaQuotes[Math.floor(Math.random() * yodaQuotes.length)];

                document.getElementById('loading').style.display = 'none';
                document.getElementById('prediction-result').style.display = 'block';
            }, 2000);
        }

        // Function to update additional match-specific data
        function updateAdditionalMatchData(team1, team2, venue) {
            // Additional updates for the specific match can be added here
            // This function can be expanded to include more match-specific data
            console.log(`Additional data updated for ${team1} vs ${team2} at ${venue}`);
        }

        // Tab switching functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('tab-button')) {
                // Remove active class from all tabs and contents
                document.querySelectorAll('.tab-button').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                e.target.classList.add('active');
                const tabId = e.target.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            }
        });

        // PSL 2025 comprehensive match data
        const pslData = {
            teams: {
                "Islamabad United": {
                    matches: 8,
                    wins: 6,
                    losses: 2,
                    points: 12,
                    nrr: "+1.285",
                    form: "WWWWWLLW",
                    recentMatches: [
                        { opponent: "Peshawar Zalmi", result: "Lost by 6 wickets", date: "2025-05-02" },
                        { opponent: "Lahore Qalandars", result: "Lost by 88 runs", date: "2025-04-30" },
                        { opponent: "Lahore Qalandars", result: "Lost by 5 wickets", date: "2025-04-26" },
                        { opponent: "Multan Sultans", result: "Won by 7 wickets", date: "2025-04-23" },
                        { opponent: "Karachi Kings", result: "Won by 6 wickets", date: "2025-04-20" }
                    ]
                },
                "Lahore Qalandars": {
                    matches: 8,
                    wins: 5,
                    losses: 2,
                    points: 11,
                    nrr: "+0.635",
                    form: "WLWWWLW",
                    recentMatches: [
                        { opponent: "Quetta Gladiators", result: "No result (Rain)", date: "2025-05-01" },
                        { opponent: "Islamabad United", result: "Won by 88 runs", date: "2025-04-30" },
                        { opponent: "Islamabad United", result: "Won by 5 wickets", date: "2025-04-26" },
                        { opponent: "Peshawar Zalmi", result: "Lost by 7 wickets", date: "2025-04-24" },
                        { opponent: "Multan Sultans", result: "Lost by 33 runs", date: "2025-04-22" }
                    ]
                },
                "Karachi Kings": {
                    matches: 8,
                    wins: 4,
                    losses: 4,
                    points: 8,
                    nrr: "-0.148",
                    form: "WLWLWWLW",
                    recentMatches: [
                        { opponent: "Multan Sultans", result: "Won by 87 runs", date: "2025-05-01" },
                        { opponent: "Quetta Gladiators", result: "Lost by 5 runs", date: "2025-04-25" },
                        { opponent: "Peshawar Zalmi", result: "Won by 2 wickets", date: "2025-04-21" },
                        { opponent: "Islamabad United", result: "Lost by 6 wickets", date: "2025-04-20" },
                        { opponent: "Quetta Gladiators", result: "Won by 56 runs", date: "2025-04-18" }
                    ]
                },
                "Quetta Gladiators": {
                    matches: 8,
                    wins: 4,
                    losses: 3,
                    points: 9,
                    nrr: "+0.245",
                    form: "LWLWWWW",
                    recentMatches: [
                        { opponent: "Lahore Qalandars", result: "No result (Rain)", date: "2025-05-01" },
                        { opponent: "Multan Sultans", result: "Won by 10 wickets", date: "2025-04-29" },
                        { opponent: "Peshawar Zalmi", result: "Won by 64 runs", date: "2025-04-27" },
                        { opponent: "Karachi Kings", result: "Won by 5 runs", date: "2025-04-25" },
                        { opponent: "Karachi Kings", result: "Lost by 56 runs", date: "2025-04-18" }
                    ]
                },
                "Peshawar Zalmi": {
                    matches: 8,
                    wins: 3,
                    losses: 5,
                    points: 6,
                    nrr: "-0.622",
                    form: "WLLWLLW",
                    recentMatches: [
                        { opponent: "Islamabad United", result: "Won by 6 wickets", date: "2025-05-02" },
                        { opponent: "Lahore Qalandars", result: "Won by 7 wickets", date: "2025-04-24" },
                        { opponent: "Quetta Gladiators", result: "Lost by 64 runs", date: "2025-04-27" },
                        { opponent: "Karachi Kings", result: "Lost by 2 wickets", date: "2025-04-21" },
                        { opponent: "Multan Sultans", result: "Won by 120 runs", date: "2025-04-19" }
                    ]
                },
                "Multan Sultans": {
                    matches: 8,
                    wins: 1,
                    losses: 7,
                    points: 2,
                    nrr: "-1.387",
                    form: "LLLLWLLL",
                    recentMatches: [
                        { opponent: "Karachi Kings", result: "Lost by 87 runs", date: "2025-05-01" },
                        { opponent: "Quetta Gladiators", result: "Lost by 10 wickets", date: "2025-04-29" },
                        { opponent: "Islamabad United", result: "Lost by 7 wickets", date: "2025-04-23" },
                        { opponent: "Lahore Qalandars", result: "Won by 33 runs", date: "2025-04-22" },
                        { opponent: "Peshawar Zalmi", result: "Lost by 120 runs", date: "2025-04-19" }
                    ]
                }
            },
            headToHead: {
                "Multan Sultans-Peshawar Zalmi": {
                    total: 1,
                    matches: [
                        { date: "2025-04-19", result: "Peshawar Zalmi won by 120 runs", scores: "PZ: 227/7, MS: 107 all out" }
                    ]
                },
                "Islamabad United-Lahore Qalandars": {
                    total: 3,
                    matches: [
                        { date: "2025-04-30", result: "Lahore Qalandars won by 88 runs", scores: "LQ: 202/6, IU: 114 all out" },
                        { date: "2025-04-26", result: "Lahore Qalandars won by 5 wickets", scores: "IU: 185/6, LQ: 186/5" },
                        { date: "2025-04-11", result: "Islamabad United won by 8 wickets", scores: "LQ: 139/10, IU: 143/2" }
                    ]
                },
                "Karachi Kings-Multan Sultans": {
                    total: 2,
                    matches: [
                        { date: "2025-05-01", result: "Karachi Kings won by 87 runs", scores: "KK: 201/5, MS: 114 all out" },
                        { date: "2025-04-12", result: "Karachi Kings won by 4 wickets", scores: "MS: 234/3, KK: 236/6" }
                    ]
                },
                "Peshawar Zalmi-Quetta Gladiators": {
                    total: 2,
                    matches: [
                        { date: "2025-04-27", result: "Quetta Gladiators won by 64 runs", scores: "QG: 182/5, PZ: 118 all out" },
                        { date: "2025-04-12", result: "Quetta Gladiators won by 80 runs", scores: "QG: 216/3, PZ: 136 all out" }
                    ]
                },
                "Karachi Kings-Lahore Qalandars": {
                    total: 1,
                    matches: [
                        { date: "2025-04-15", result: "Lahore Qalandars won by 65 runs", scores: "LQ: 226/4, KK: 161 all out" }
                    ]
                },
                "Islamabad United-Multan Sultans": {
                    total: 2,
                    matches: [
                        { date: "2025-04-23", result: "Islamabad United won by 7 wickets", scores: "MS: 148/8, IU: 149/3" },
                        { date: "2025-04-16", result: "Islamabad United won by 47 runs", scores: "IU: 184/5, MS: 137 all out" }
                    ]
                },
                "Karachi Kings-Quetta Gladiators": {
                    total: 2,
                    matches: [
                        { date: "2025-04-25", result: "Quetta Gladiators won by 5 runs", scores: "QG: 170/7, KK: 165/8" },
                        { date: "2025-04-18", result: "Karachi Kings won by 56 runs", scores: "KK: 205/6, QG: 149 all out" }
                    ]
                },
                "Lahore Qalandars-Peshawar Zalmi": {
                    total: 1,
                    matches: [
                        { date: "2025-04-24", result: "Peshawar Zalmi won by 7 wickets", scores: "LQ: 172/6, PZ: 173/3" }
                    ]
                },
                "Islamabad United-Karachi Kings": {
                    total: 1,
                    matches: [
                        { date: "2025-04-20", result: "Islamabad United won by 6 wickets", scores: "KK: 165/7, IU: 166/4" }
                    ]
                },
                "Karachi Kings-Peshawar Zalmi": {
                    total: 1,
                    matches: [
                        { date: "2025-04-21", result: "Karachi Kings won by 2 wickets", scores: "PZ: 178/6, KK: 179/8" }
                    ]
                },
                "Lahore Qalandars-Multan Sultans": {
                    total: 1,
                    matches: [
                        { date: "2025-04-22", result: "Multan Sultans won by 33 runs", scores: "MS: 195/5, LQ: 162 all out" }
                    ]
                },
                "Islamabad United-Peshawar Zalmi": {
                    total: 2,
                    matches: [
                        { date: "2025-05-02", result: "Peshawar Zalmi won by 6 wickets", scores: "IU: 163/7, PZ: 164/4" },
                        { date: "2025-04-14", result: "Islamabad United won by 102 runs", scores: "IU: 254/4, PZ: 152 all out" }
                    ]
                },
                "Multan Sultans-Quetta Gladiators": {
                    total: 1,
                    matches: [
                        { date: "2025-04-29", result: "Quetta Gladiators won by 10 wickets", scores: "MS: 89 all out, QG: 90/0" }
                    ]
                },
                "Lahore Qalandars-Quetta Gladiators": {
                    total: 2,
                    matches: [
                        { date: "2025-05-01", result: "No result (Rain)", scores: "Match abandoned" },
                        { date: "2025-04-13", result: "Lahore Qalandars won by 79 runs", scores: "LQ: 242/5, QG: 163 all out" }
                    ]
                },
                "Islamabad United-Quetta Gladiators": {
                    total: 0,
                    matches: []
                }
            },
            venues: {
                "Lahore": {
                    matches: 11,
                    avgFirstInnings: 185,
                    avgSecondInnings: 162,
                    tossDecision: "72% elected to field first",
                    winningToss: "59% matches won by team winning toss"
                },
                "Karachi": {
                    matches: 5,
                    avgFirstInnings: 198,
                    avgSecondInnings: 184,
                    tossDecision: "80% elected to field first",
                    winningToss: "60% matches won by team winning toss"
                },
                "Multan": {
                    matches: 4,
                    avgFirstInnings: 168,
                    avgSecondInnings: 152,
                    tossDecision: "64% elected to field first",
                    winningToss: "52% matches won by team winning toss"
                },
                "Rawalpindi": {
                    matches: 4,
                    avgFirstInnings: 198,
                    avgSecondInnings: 178,
                    tossDecision: "75% elected to field first",
                    winningToss: "50% matches won by team winning toss"
                }
            }
        };

        // Function to update analysis breakdown
        function updateAnalysisBreakdown(match) {
            const team1 = match.team1;
            const team2 = match.team2;
            const venue = match.venue;

            // Get team data
            const team1Data = pslData.teams[team1];
            const team2Data = pslData.teams[team2];

            // Get head-to-head data
            const h2hKey = [team1, team2].sort().join('-');
            const h2hData = pslData.headToHead[h2hKey] || { total: 0, matches: [] };

            // Calculate wins for each team
            let team1Wins = 0;
            let team2Wins = 0;
            
            h2hData.matches.forEach(match => {
                if (match.result.includes(team1) && match.result.includes("won")) {
                    team1Wins++;
                } else if (match.result.includes(team2) && match.result.includes("won")) {
                    team2Wins++;
                }
            });

            // Get venue data
            const venueData = pslData.venues[venue] || pslData.venues["Lahore"]; // Default to Lahore if venue not found

            // Update Key Factors tab
            document.getElementById('h2h-current-season').innerHTML = `<span style="color: #2B6735;">${team1} won ${team1Wins}, ${team2} won ${team2Wins}</span>`;
            document.getElementById('toss-advantage').innerHTML = `<span style="color: #B27F35;">${venueData.winningToss}</span>`;
            document.getElementById('win-percentage').innerHTML = `<span style="color: #2B6735;">${team1}: ${(team1Data.wins/team1Data.matches*100).toFixed(1)}% | ${team2}: ${(team2Data.wins/team2Data.matches*100).toFixed(1)}%</span>`;
            document.getElementById('venue-performance').innerHTML = `<span style="color: #2B6735;">See venue analysis tab for details</span>`;
            document.getElementById('recent-form').innerHTML = `<span style="color: #B27F35;">${team1}: ${team1Data.form} | ${team2}: ${team2Data.form}</span>`;
            document.getElementById('key-players-status').innerHTML = `<span style="color: #2B6735;">All players available unless otherwise noted</span>`;

            // Update Head to Head tab
            document.getElementById('total-matches').textContent = h2hData.total;
            document.getElementById('team1-wins').textContent = team1Wins;
            document.getElementById('team2-wins').textContent = team2Wins;
            document.querySelector('.team1-stat .h2h-label').textContent = `${team1} Wins`;
            document.querySelector('.team2-stat .h2h-label').textContent = `${team2} Wins`;

            // Update recent H2H matches
            let recentH2HHtml = '';
            if (h2hData.matches && h2hData.matches.length > 0) {
                h2hData.matches.forEach(match => {
                    const winnerColor = match.result.includes(team1) && match.result.includes('won') ? '#2B6735' : 
                                      match.result.includes(team2) && match.result.includes('won') ? '#B27F35' : '#666';
                    recentH2HHtml += `
                        <div class="match-result">
                            <strong>${match.date}</strong><br>
                            <span style="color: ${winnerColor};">${match.result}</span><br>
                            <small>${match.scores}</small>
                        </div>
                    `;
                });
            } else {
                recentH2HHtml = `<div class="match-result">No head-to-head matches in PSL 2025</div>`;
            }
            document.getElementById('recent-h2h-matches').innerHTML = recentH2HHtml;

            // Update Venue Analysis tab
            document.getElementById('venue-name').textContent = `${venue} Cricket Stadium Stats`;
            document.getElementById('avg-first-innings').innerHTML = `<span style="color: #B27F35;">${venueData.avgFirstInnings} runs</span>`;
            document.getElementById('avg-second-innings').innerHTML = `<span style="color: #B27F35;">${venueData.avgSecondInnings} runs</span>`;
            document.getElementById('toss-decision-trend').innerHTML = `<span style="color: #B27F35;">${venueData.tossDecision}</span>`;
            document.getElementById('team1-venue-record').innerHTML = `<span style="color: #2B6735;">Check team performance at venue</span>`;
            document.getElementById('team2-venue-record').innerHTML = `<span style="color: #2B6735;">Check team performance at venue</span>`;

            // Update Current Form tab
            document.getElementById('team1-form-title').textContent = `${team1} - Recent Form`;
            document.getElementById('team2-form-title').textContent = `${team2} - Recent Form`;

            // Generate form HTML for team 1
            let team1FormHtml = '';
            if (team1Data.recentMatches) {
                team1Data.recentMatches.forEach(match => {
                    const resultClass = match.result.includes('Won') ? 'win' : match.result.includes('Lost') ? 'loss' : '';
                    const resultText = match.result.includes('Won') ? 'win' : match.result.includes('Lost') ? 'loss' : '';
                    team1FormHtml += `
                        <div class="form-match ${resultClass}">
                            <span>vs ${match.opponent} (${match.date})</span>
                            <span class="result ${resultText}">${match.result}</span>
                        </div>
                    `;
                });
            }

            // Generate form HTML for team 2
            let team2FormHtml = '';
            if (team2Data.recentMatches) {
                team2Data.recentMatches.forEach(match => {
                    const resultClass = match.result.includes('Won') ? 'win' : match.result.includes('Lost') ? 'loss' : '';
                    const resultText = match.result.includes('Won') ? 'win' : match.result.includes('Lost') ? 'loss' : '';
                    team2FormHtml += `
                        <div class="form-match ${resultClass}">
                            <span>vs ${match.opponent} (${match.date})</span>
                            <span class="result ${resultText}">${match.result}</span>
                        </div>
                    `;
                });
            }

            document.getElementById('team1-recent-form').innerHTML = team1FormHtml;
            document.getElementById('team2-recent-form').innerHTML = team2FormHtml;

            // Update additional match data
            updateAdditionalMatchData(team1, team2, venue);
        }

        // Initialize when page loads
        window.onload = function() {
            populateMatchSelector();
            
            // Add event listeners
            document.getElementById('match-select').addEventListener('change', function() {
                showMatchDetails(this.value);
            });
            document.getElementById('predict-btn').addEventListener('click', generatePrediction);
        };
    </script>
</body>
</html>